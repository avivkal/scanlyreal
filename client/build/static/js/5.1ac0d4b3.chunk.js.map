{"version":3,"sources":["../../../../../node_modules/react-bootstrap/esm/Table.js","../../../../../node_modules/react-bootstrap/esm/Row.js","Components/DashboardFilters/DashboardFilters.js"],"names":["Table","React","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","DEVICE_SIZES","Row","noGutters","_ref$as","as","Component","sizePrefix","forEach","brkPoint","cols","propValue","infix","push","apply","concat","displayName","defaultProps","Dashboard","state","products","days","totalPriceLocal","filter","componentDidMount","a","loggedIn","getCurrentUser","logIn","email","password","setLoggedIn","loadData","history","LOGIN_PATH","load","isShufersal","currentUser","selection","console","log","axios","post","number","then","data","setState","x","i","length","price","finishedLoading","handleDropdownChange","handleDropdownChangeFilters","this","loading","animation","style","textAlign","Toggle","id","Menu","Item","onClick","map","current","total","height","src","_id","image","name","barcode","Math","round","toFixed","connect","main","dispatch","updateCurrentUser","user","mainActions","loadingActions"],"mappings":"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","file":"static/js/5.1ac0d4b3.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar DEVICE_SIZES = ['xl', 'lg', 'md', 'sm', 'xs'];\nvar defaultProps = {\n  noGutters: false\n};\nvar Row = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      noGutters = _ref.noGutters,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"noGutters\", \"as\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  var sizePrefix = decoratedBsPrefix + \"-cols\";\n  var classes = [];\n  DEVICE_SIZES.forEach(function (brkPoint) {\n    var propValue = props[brkPoint];\n    delete props[brkPoint];\n    var cols;\n\n    if (propValue != null && typeof propValue === 'object') {\n      cols = propValue.cols;\n    } else {\n      cols = propValue;\n    }\n\n    var infix = brkPoint !== 'xs' ? \"-\" + brkPoint : '';\n    if (cols != null) classes.push(\"\" + sizePrefix + infix + \"-\" + cols);\n  });\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames.apply(void 0, [className, decoratedBsPrefix, noGutters && 'no-gutters'].concat(classes))\n  }));\n});\nRow.displayName = 'Row';\nRow.defaultProps = defaultProps;\nexport default Row;","import React,{Component} from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as mainActions from '../../Store/Actions/mainActions'\r\nimport * as loadingActions from '../../Store/Actions/loadingActions'\r\nimport { LOGIN_PATH } from '../../Constants/const';\r\nimport { getCurrentUser } from '../../UtilityFunctions/functions';\r\nimport { Container,Table,Dropdown,Spinner,Row } from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport './dashboardFilters.scss'\r\nclass Dashboard extends Component {\r\n    state = {\r\n        products: [],\r\n        days: 30,\r\n        totalPriceLocal: 0,\r\n        filter:'price'\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        // axios.get('https://chp.co.il/autocompletion/product_extended?term=8717163647226').then(data=> console.log(data.data[0].value))\r\n        if (!this.props.loggedIn) {\r\n            if (getCurrentUser()) {\r\n                await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n                this.props.setLoggedIn()\r\n                this.loadData(this.state.days)\r\n            }\r\n            else {\r\n                this.props.history.push(LOGIN_PATH)\r\n            }\r\n        }\r\n        else{\r\n            await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n            this.loadData(this.state.days)\r\n        }\r\n    }\r\n    loadData = (days,filter) => {\r\n        this.props.load()\r\n        const isShufersal = this.props.currentUser.selection === 'Shufersal' ? true : false;\r\n        console.log(this.props.currentUser.selection + isShufersal)\r\n        axios.post('/products/agg',{email:getCurrentUser().email,number:days, isShufersal:isShufersal,filter:filter}).then(data=>{\r\n            this.setState({products:data.data})\r\n            let x = 0;\r\n            for(let i = 0; i<data.data.length; i++){\r\n                x+= data.data[i].price;\r\n            }\r\n            this.setState({totalPriceLocal:x})\r\n\r\n            console.log(data.data)\r\n            this.props.finishedLoading()\r\n        })\r\n    }\r\n\r\n    //all through currentUser in Redux!! no local storage!! only for password and username\r\n\r\n    handleDropdownChange = async (days) => {\r\n        this.setState({days:days})\r\n        this.loadData(days)\r\n    }\r\n\r\n    handleDropdownChangeFilters = async (data) => {\r\n        this.setState({filter:data})\r\n        this.loadData(this.state.days,data)\r\n    }\r\n    render(){\r\n        if(this.props.loading)\r\n            return <Spinner animation=\"border\" className=\"spinner\" />\r\n        return(\r\n            <Container className=\"margin-top-container\">\r\n             \r\n<h1 style={{textAlign:\"right\"}}>נתוני צריכה</h1>\r\n<Row>\r\n<Dropdown>\r\n                        <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                  לפי    {this.state.days} ימים אחרונים\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(7)}>לפי 7 ימים אחרונים</Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(30)}>לפי 30 ימים אחרונים </Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(365)}>לפי 365 ימים אחרונים</Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n\r\n                    <Dropdown className=\"dropdown-style\">\r\n                        <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                  {this.state.filter === 'price' ? 'מחיר כולל' : 'כמות'}\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChangeFilters('price')}>מחיר כולל</Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChangeFilters('amount')}>כמות </Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                    </Row>\r\n                    <p className=\"align-right\">נתונים לפי עגלה נוכחית: <b>{this.props.currentUser.selection === 'Shufersal' ? 'שופרסל' : 'רמי לוי'}</b></p>\r\n\r\n<Table bordered hover className=\"table-style\">\r\n  <thead>\r\n    <tr>\r\n    <th>מחיר כולל</th>\r\n    <th>כמות</th>\r\n\r\n      <th>תמונה</th>\r\n      <th>שם מוצר</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n      {this.state.products.map(current => {\r\n          return <tr key={current._id.barcode}>\r\n                        <td>{current.price}₪</td>\r\n                        <td>{current.total}</td>\r\n\r\n          <td><img height=\"50px\" src={current._id.image}/></td>\r\n          <td>{current._id.name}</td>\r\n\r\n        </tr>\r\n      })}\r\n    <tr key={'total'}>\r\n          <td>{(Math.round((this.state.totalPriceLocal) * 100) / 100).toFixed(2)} ₪</td>\r\n\r\n        </tr>\r\n  </tbody>\r\n</Table>\r\n</Container>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        currentUser: state.main.currentUser,\r\n        loggedIn: state.main.loggedIn,\r\n        loading: state.loading.loading\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        updateCurrentUser: (user) => dispatch(mainActions.updateUsername(user)),\r\n        setLoggedIn: () => dispatch(mainActions.loggedIn()),\r\n        load: () => dispatch(loadingActions.loading()),\r\n        finishedLoading: () => dispatch(loadingActions.finishedLoading()),\r\n        logIn: (email, password) => dispatch(mainActions.logIn(email, password))\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);"],"sourceRoot":""}