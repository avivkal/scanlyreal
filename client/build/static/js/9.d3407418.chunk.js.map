{"version":3,"sources":["../../../../../node_modules/react-bootstrap/esm/Table.js","Components/Dashboard/Dashboard.js"],"names":["Table","React","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","Dashboard","state","products","shufersalTotal","ramiLevyTotal","image","days","componentDidMount","a","loggedIn","getCurrentUser","logIn","email","password","setLoggedIn","loadData","history","push","LOGIN_PATH","load","axios","get","then","data","setState","y","m","x","shufersalPrice","ramiLevyPrice","finishedLoading","handleDropdownChange","this","loading","animation","Toggle","id","Menu","Item","onClick","map","current","newDate","Date","creationDate","toLocaleDateString","isSelectionShufersal","selection","difference","Math","round","toFixed","message","height","src","name","_id","style","borderTop","abs","Component","connect","currentUser","main","dispatch","updateCurrentUser","user","mainActions","loadingActions"],"mappings":"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","file":"static/js/9.d3407418.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import React,{Component} from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as mainActions from '../../Store/Actions/mainActions'\r\nimport * as promptActions from '../../Store/Actions/promptActions'\r\nimport * as loadingActions from '../../Store/Actions/loadingActions'\r\nimport { LOGIN_PATH } from '../../Constants/const';\r\nimport { getCurrentUser } from '../../UtilityFunctions/functions';\r\nimport { Container,Dropdown,Table,Spinner } from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport './dashboard.scss'\r\nimport { finishedLoading } from '../../Store/Actions/loadingActions';\r\n\r\nclass Dashboard extends Component {\r\n    state = {\r\n        products: [],\r\n        // productsNotAdded: [],\r\n        shufersalTotal: 0,\r\n        ramiLevyTotal: 0,\r\n        image: '',\r\n        days: 30,\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        // axios.get('https://chp.co.il/autocompletion/product_extended?term=8717163647226').then(data=> console.log(data.data[0].value))\r\n        if (!this.props.loggedIn) {\r\n            if (getCurrentUser()) {\r\n                await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n                this.props.setLoggedIn()\r\n                this.loadData(this.state.days)\r\n            }\r\n            else {\r\n                this.props.history.push(LOGIN_PATH)\r\n            }\r\n        }\r\n        else{\r\n            await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n            this.loadData(this.state.days)\r\n        }\r\n    }\r\n    loadData = (days) => {\r\n        this.props.load()\r\n        let x = []\r\n        let y = []\r\n        axios.get('/products/' + getCurrentUser().email + '/' + days).then(data => {\r\n            this.setState({products: data.data});\r\n            let y = 0, m = 0;\r\n            for(let x in data.data){\r\n                y += data.data[x].shufersalPrice;\r\n                m += data.data[x].ramiLevyPrice;\r\n            }\r\n            this.setState({shufersalTotal: y})\r\n            this.setState({ramiLevyTotal: m})\r\n            this.props.finishedLoading()\r\n\r\n    })\r\n        // axios.get('/products/notAdded/' + getCurrentUser().email).then(data => {\r\n        //     this.setState({productsNotAdded: data.data})\r\n\r\n        //   })\r\n    }\r\n\r\n    handleDropdownChange = async (days) => {\r\n        this.setState({days:days})\r\n        this.loadData(days)\r\n    }\r\n\r\n    render(){\r\n        if(this.props.loading)\r\n            return <Spinner animation=\"border\" className=\"spinner\" />\r\n        return(\r\n            <Container className=\"margin-top-container\">\r\n            <h1 className=\"align-right\">מוצרים שסרקת</h1>\r\n            <Dropdown>\r\n                        <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                  לפי    {this.state.days} ימים אחרונים\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(7)}>לפי 7 ימים אחרונים</Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(30)}>לפי 30 ימים אחרונים </Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(365)}>לפי 365 ימים אחרונים</Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                    <p className=\"align-right\">לאיזו עגלה המוצר נכנס = 🛒</p>\r\n\r\n                                <Table bordered hover className=\"table-style\">\r\n  <thead>\r\n    <tr>\r\n      <th className=\"table-style-image\">ניתן לחסוך</th>\r\n      <th className=\"table-style-image\">שופרסל</th>\r\n      <th className=\"table-style-image\">רמי לוי</th>\r\n      <th className=\"table-style-image\">תמונה</th>\r\n      <th>שם מוצר</th>\r\n      <th>תאריך</th>\r\n\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n      {this.state.products.map((current) => {\r\n          const date = new Date(current.creationDate);\r\n          const newDate = date.toLocaleDateString('he-IS');\r\n        //   const greater = current.shufersalPrice < current.ramiLevyPrice ? 'shufersal' : 'ramiLevy'\r\n          //greater === 'shufersal' ? 'red-style' : 'green-style'\r\n          const isSelectionShufersal = current.selection === 'Shufersal' ? true : false;\r\n          const difference = (Math.round((current.shufersalPrice-current.ramiLevyPrice) * 100) / 100).toFixed(2);\r\n          let message = ''\r\n          if(isSelectionShufersal){\r\n            if(difference>0){\r\n                message = `₪ ${difference} ניתן לחסוך ברמי לוי`\r\n            }\r\n            \r\n          }\r\n          else{\r\n            if(difference<0){\r\n                message = `₪ ${difference} ניתן לחסוך בשופרסל`\r\n            }\r\n            \r\n          }\r\n          return <tr key={current._id}>\r\n          <td className='table-style-image'>{message} </td>\r\n          <td className={(!isSelectionShufersal && 'gray-style') + ' table-style-image'}>{current.shufersalPrice} ₪ {isSelectionShufersal && <div>🛒</div>}</td>\r\n      <td className={(isSelectionShufersal && 'gray-style') + ' table-style-image'}>{current.ramiLevyPrice} ₪ {!isSelectionShufersal && <div>🛒</div>}</td>\r\n          <td className=\"table-style-image\"><img height=\"50px\" src={current.image}/></td>\r\n          <td>{current.name}</td>\r\n          <td>{newDate}</td>\r\n\r\n        </tr>\r\n                      \r\n      })}\r\n    <tr key='total' style={{borderTop: \"2px solid black\"}}>\r\n    <td>{(Math.round((Math.abs(this.state.ramiLevyTotal-this.state.shufersalTotal)) * 100) / 100).toFixed(2)} ₪ :הפרש מחיר בין הסלים</td>\r\n\r\n          <td className={this.state.shufersalTotal < this.state.ramiLevyTotal ? 'green-style' : 'red-style'}>{(Math.round(this.state.shufersalTotal * 100) / 100).toFixed(2)} ₪</td>\r\n          <td className={this.state.shufersalTotal > this.state.ramiLevyTotal ? 'green-style' : 'red-style'}>{(Math.round(this.state.ramiLevyTotal * 100) / 100).toFixed(2)} ₪</td>\r\n        </tr>\r\n  </tbody>\r\n</Table>\r\n{/* <h1 style={{textAlign:\"right\"}}>מוצרים שלא נכנסו לעגלה</h1>\r\n<Table striped bordered hover variant=\"dark\" className=\"table-style\">\r\n  <thead>\r\n    <tr>\r\n      <th>תמונה</th>\r\n      <th>שם מוצר</th>\r\n      <th>תאריך</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n      {this.state.productsNotAdded.map(current => {\r\n                    const date = new Date(current.creationDate);\r\n                    const newDate = date.toLocaleDateString('he-IS');          \r\n          return <tr key={current._id}>\r\n                        <td><img height=\"50px\" src={current.image}/></td>\r\n          <td>{current.name}</td>\r\n          <td>{newDate}</td>\r\n\r\n        </tr>\r\n      })}\r\n    \r\n  </tbody>\r\n</Table> */}\r\n\r\n\r\n</Container>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        currentUser: state.main.currentUser,\r\n        loggedIn: state.main.loggedIn,\r\n        loading: state.loading.loading\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        updateCurrentUser: (user) => dispatch(mainActions.updateUsername(user)),\r\n        setLoggedIn: () => dispatch(mainActions.loggedIn()),\r\n        load: () => dispatch(loadingActions.loading()),\r\n        finishedLoading: () => dispatch(loadingActions.finishedLoading()),\r\n        logIn: (email, password) => dispatch(mainActions.logIn(email, password))\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);"],"sourceRoot":""}