{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\avivk\\\\Documents\\\\GitHub\\\\scanlyreal\\\\client\\\\src\\\\Components\\\\Wifi\\\\Wifi.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as mainActions from '../../Store/Actions/mainActions';\nimport * as promptActions from '../../Store/Actions/promptActions';\nimport * as loadingActions from '../../Store/Actions/loadingActions';\nimport { LOGIN_PATH } from '../../Constants/const';\nimport { getCurrentUser } from '../../UtilityFunctions/functions';\nimport { Form, Button, Container, Spinner, Row, Col } from 'react-bootstrap';\nimport axios from 'axios';\nimport Barcode from 'react-barcode';\nimport './wifi.scss';\n\nclass Wifi extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      submitUsername: false,\n      submitPassword: false\n    };\n\n    this.onSubmit = event => {\n      event.preventDefault();\n      this.props.updateWifiDetails(this.state.username, this.state.password);\n      this.setState({\n        submitUsername: true\n      }); // axios.post('/wifi',{email:getCurrentUser().email,wifiUsername: this.state.username,wifiPassword: this.state.password }).then(data => console.log(data))\n    };\n\n    this.componentDidMount = () => {\n      if (!this.props.loggedIn) {\n        if (getCurrentUser()) {\n          this.props.updateCurrentUser(getCurrentUser());\n          this.props.setLoggedIn();\n        } else {\n          this.props.history.push(LOGIN_PATH);\n        }\n      }\n\n      this.props.load();\n\n      try {\n        axios.get('/details/', {\n          email: getCurrentUser().email\n        }).then(data => {\n          const user = data.data;\n          this.setState({\n            username: user.wifiUsername,\n            password: user.wifiPassword\n          });\n        });\n      } catch (error) {\n        this.props.openPrompt('תקלה', 'לא ניתן לבצע את הפעולה');\n      } finally {\n        this.props.finishedLoading();\n      }\n    };\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n  }\n\n  render() {\n    if (this.props.loading) {\n      return /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [!(this.state.submitUsername || this.state.submitPassword) && /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: this.onSubmit,\n        className: \"form-style\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: 12,\n          lg: 6,\n          className: \"float-right\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formBasicEmail\",\n            className: \"align-right\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Wifi\\u05E9\\u05DD \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9 \\u05DC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"username\",\n              type: \"text\",\n              placeholder: \"Enter Wifi Username\",\n              onChange: e => this.onChange(e),\n              value: this.state.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formBasicPassword\",\n            className: \"align-right\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Wifi\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4 \\u05DC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"password\",\n              type: \"password\",\n              placeholder: \"Enter Wifi Password\",\n              onChange: e => this.onChange(e),\n              value: this.state.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            type: \"submit\",\n            children: \"\\u05D4\\u05DE\\u05E9\\u05DA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 79\n      }, this), this.state.submitUsername && /*#__PURE__*/_jsxDEV(Container, {\n        children: [\" \", /*#__PURE__*/_jsxDEV(Row, {\n          className: \"center-style\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(Col, {\n            md: {\n              span: 6,\n              offset: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Barcode, {\n              value: this.state.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 2\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 90\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 59\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [\" \", /*#__PURE__*/_jsxDEV(Col, {\n            md: {\n              span: 6,\n              offset: 3\n            },\n            className: \"center-style\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: () => this.setState({\n                submitPassword: true,\n                submitUsername: false\n              }),\n              children: \"\\u05D4\\u05DE\\u05E9\\u05DA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 83\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 47\n      }, this), this.state.submitPassword && /*#__PURE__*/_jsxDEV(Container, {\n        children: [\" \", /*#__PURE__*/_jsxDEV(Row, {\n          className: \"center-style\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(Col, {\n            md: {\n              span: 6,\n              offset: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Barcode, {\n              value: this.state.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 2\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 90\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 59\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [\" \", /*#__PURE__*/_jsxDEV(Col, {\n            md: {\n              span: 6,\n              offset: 3\n            },\n            className: \"center-style\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: () => this.setState({\n                submitPassword: false,\n                submitUsername: false\n              }),\n              children: \"\\u05E1\\u05D9\\u05D5\\u05DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 83\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 47\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.main.currentUser,\n    loggedIn: state.main.loggedIn,\n    loading: state.loading.loading\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateCurrentUser: user => dispatch(mainActions.updateUsername(user)),\n    setLoggedIn: () => dispatch(mainActions.loggedIn()),\n    updateWifiDetails: (username, password) => dispatch(mainActions.updateWifiDetails(username, password)),\n    openPrompt: (title, text) => dispatch(promptActions.openPrompt(title, text)),\n    load: () => dispatch(loadingActions.loading()),\n    finishedLoading: () => dispatch(loadingActions.finishedLoading())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wifi);","map":{"version":3,"sources":["C:/Users/avivk/Documents/GitHub/scanlyreal/client/src/Components/Wifi/Wifi.js"],"names":["React","Component","connect","mainActions","promptActions","loadingActions","LOGIN_PATH","getCurrentUser","Form","Button","Container","Spinner","Row","Col","axios","Barcode","Wifi","state","username","password","submitUsername","submitPassword","onSubmit","event","preventDefault","props","updateWifiDetails","setState","componentDidMount","loggedIn","updateCurrentUser","setLoggedIn","history","push","load","get","email","then","data","user","wifiUsername","wifiPassword","error","openPrompt","finishedLoading","onChange","target","name","value","render","loading","e","span","offset","mapStateToProps","currentUser","main","mapDispatchToProps","dispatch","updateUsername","title","text"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as mainActions from '../../Store/Actions/mainActions'\r\nimport * as promptActions from '../../Store/Actions/promptActions'\r\nimport * as loadingActions from '../../Store/Actions/loadingActions'\r\nimport { LOGIN_PATH } from '../../Constants/const';\r\nimport { getCurrentUser } from '../../UtilityFunctions/functions';\r\nimport { Form, Button, Container, Spinner,Row,Col } from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport Barcode from 'react-barcode'\r\nimport './wifi.scss'\r\n\r\n\r\nclass Wifi extends Component {\r\n    state = {\r\n        username: '',\r\n        password: '',\r\n        submitUsername: false,\r\n        submitPassword: false,\r\n    }\r\n    onSubmit = (event) => {\r\n        event.preventDefault();\r\n        this.props.updateWifiDetails(this.state.username, this.state.password);\r\n        this.setState({ submitUsername: true })\r\n        // axios.post('/wifi',{email:getCurrentUser().email,wifiUsername: this.state.username,wifiPassword: this.state.password }).then(data => console.log(data))\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        if (!this.props.loggedIn) {\r\n            if (getCurrentUser()) {\r\n                this.props.updateCurrentUser(getCurrentUser())\r\n                this.props.setLoggedIn()\r\n            }\r\n            else {\r\n                this.props.history.push(LOGIN_PATH)\r\n            }\r\n        }\r\n        this.props.load();\r\n        try {\r\n            axios.get('/details/' ,{email: getCurrentUser().email}).then(data => {\r\n                const user = data.data;\r\n                this.setState({\r\n                    username: user.wifiUsername,\r\n                    password: user.wifiPassword,\r\n                });\r\n            })\r\n        }\r\n        catch (error) {\r\n            this.props.openPrompt('תקלה', 'לא ניתן לבצע את הפעולה');\r\n        }\r\n        finally {\r\n            this.props.finishedLoading();\r\n        }\r\n\r\n    }\r\n\r\n    onChange = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    render() {\r\n        if (this.props.loading) {\r\n            return <Spinner animation=\"border\" className=\"spinner\" />\r\n        }\r\n\r\n        return (\r\n            <Container>\r\n                {!(this.state.submitUsername || this.state.submitPassword) && <Form onSubmit={this.onSubmit} className=\"form-style\">\r\n                    <Col xs={12} lg={6} className=\"float-right\">\r\n                    <Form.Group controlId=\"formBasicEmail\" className=\"align-right\">\r\n                        <Form.Label>Wifiשם משתמש ל</Form.Label>\r\n                        <Form.Control name=\"username\" type=\"text\" placeholder=\"Enter Wifi Username\" onChange={(e) => this.onChange(e)} value={this.state.username} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formBasicPassword\" className=\"align-right\">\r\n                    <Form.Label>Wifiסיסמה ל</Form.Label>\r\n                        <Form.Control name=\"password\" type=\"password\" placeholder=\"Enter Wifi Password\" onChange={(e) => this.onChange(e)} value={this.state.password} />\r\n                    </Form.Group>\r\n                    <Button variant=\"primary\" type=\"submit\">\r\n                        המשך\r\n  </Button>\r\n  </Col>\r\n                </Form>}\r\n                \r\n                {this.state.submitUsername && <Container> <Row className=\"center-style\"> <Col md={{ span: 6, offset: 3 }}\r\n><Barcode value={this.state.username} /></Col> </Row>\r\n                  <Row> <Col md={{ span: 6, offset: 3 }} className=\"center-style\"><Button variant=\"primary\" onClick={()=>this.setState({submitPassword: true, submitUsername: false})}>\r\n                        המשך\r\n  </Button></Col> </Row></Container>}\r\n                {this.state.submitPassword && <Container> <Row className=\"center-style\"> <Col md={{ span: 6, offset: 3 }}\r\n><Barcode value={this.state.password} /></Col> </Row>\r\n                  <Row> <Col md={{ span: 6, offset: 3 }} className=\"center-style\"><Button variant=\"primary\" onClick={()=>this.setState({submitPassword: false, submitUsername: false})}>\r\n                        סיום\r\n  </Button></Col> </Row></Container>}\r\n\r\n\r\n               \r\n\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        currentUser: state.main.currentUser,\r\n        loggedIn: state.main.loggedIn,\r\n        loading: state.loading.loading\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        updateCurrentUser: (user) => dispatch(mainActions.updateUsername(user)),\r\n        setLoggedIn: () => dispatch(mainActions.loggedIn()),\r\n        updateWifiDetails: (username, password) => dispatch(mainActions.updateWifiDetails(username, password)),\r\n        openPrompt: (title, text) => dispatch(promptActions.openPrompt(title, text)),\r\n        load: () => dispatch(loadingActions.loading()),\r\n        finishedLoading: () => dispatch(loadingActions.finishedLoading()),\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Wifi);"]},"metadata":{},"sourceType":"module"}