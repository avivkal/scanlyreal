{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{connect}from'react-redux';import*as mainActions from'../../Store/Actions/mainActions';import*as loadingActions from'../../Store/Actions/loadingActions';import{LOGIN_PATH}from'../../Constants/const';import{getCurrentUser}from'../../UtilityFunctions/functions';import{Container,Table,Dropdown,Spinner}from'react-bootstrap';import axios from'axios';import'./DashboardNotAdded.scss';var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(){var _this;_classCallCheck(this,Dashboard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={productsNotAdded:[],days:30};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.props.loggedIn){_context.next=11;break;}if(!getCurrentUser()){_context.next=8;break;}_context.next=4;return _this.props.logIn(getCurrentUser().email,getCurrentUser().password);case 4:_this.props.setLoggedIn();_this.loadData(_this.state.days);_context.next=9;break;case 8:_this.props.history.push(LOGIN_PATH);case 9:_context.next=14;break;case 11:_context.next=13;return _this.props.logIn(getCurrentUser().email,getCurrentUser().password);case 13:_this.loadData(_this.state.days);case 14:case\"end\":return _context.stop();}}},_callee);}));_this.loadData=function(days){_this.props.load();axios.get('/products/notAdded/'+getCurrentUser().email+'/'+days).then(function(data){_this.setState({productsNotAdded:data.data});_this.props.finishedLoading();});};_this.handleDropdownChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(days){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({days:days});_this.loadData(days);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();return _this;}_createClass(Dashboard,[{key:\"render\",value:function render(){var _this2=this;if(this.props.loading)return/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"spinner\"});return/*#__PURE__*/_jsxs(Container,{className:\"margin-top-container\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"right\"},children:\"\\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05E9\\u05DC\\u05D0 \\u05E0\\u05DB\\u05E0\\u05E1\\u05D5 \\u05DC\\u05E2\\u05D2\\u05DC\\u05D4\"}),/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsxs(Dropdown.Toggle,{variant:\"dark\",id:\"dropdown-basic\",children:[\"\\u05DC\\u05E4\\u05D9    \",this.state.days,\" \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChange(7);},children:\"\\u05DC\\u05E4\\u05D9 7 \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChange(30);},children:\"\\u05DC\\u05E4\\u05D9 30 \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD \"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChange(365);},children:\"\\u05DC\\u05E4\\u05D9 365 \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD\"})]})]}),/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,className:\"table-style\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u05EA\\u05DE\\u05D5\\u05E0\\u05D4\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E9\\u05DD \\u05DE\\u05D5\\u05E6\\u05E8\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.productsNotAdded.map(function(current){var date=new Date(current.creationDate);var newDate=date.toLocaleDateString('he-IS');return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{height:\"50px\",src:current.image})}),/*#__PURE__*/_jsx(\"td\",{children:current.name}),/*#__PURE__*/_jsx(\"td\",{children:newDate})]},current._id);})})]})]});}}]);return Dashboard;}(Component);var mapStateToProps=function mapStateToProps(state){return{currentUser:state.main.currentUser,loggedIn:state.main.loggedIn,loading:state.loading.loading};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{updateCurrentUser:function updateCurrentUser(user){return dispatch(mainActions.updateUsername(user));},setLoggedIn:function setLoggedIn(){return dispatch(mainActions.loggedIn());},load:function load(){return dispatch(loadingActions.loading());},finishedLoading:function finishedLoading(){return dispatch(loadingActions.finishedLoading());},logIn:function logIn(email,password){return dispatch(mainActions.logIn(email,password));}};};export default connect(mapStateToProps,mapDispatchToProps)(Dashboard);","map":{"version":3,"sources":["C:/Users/avivk/Documents/GitHub/scanlyreal/client/src/Components/DashboardNotAdded/DashboardNotAdded.js"],"names":["React","Component","connect","mainActions","loadingActions","LOGIN_PATH","getCurrentUser","Container","Table","Dropdown","Spinner","axios","Dashboard","state","productsNotAdded","days","componentDidMount","props","loggedIn","logIn","email","password","setLoggedIn","loadData","history","push","load","get","then","data","setState","finishedLoading","handleDropdownChange","loading","textAlign","map","current","date","Date","creationDate","newDate","toLocaleDateString","image","name","_id","mapStateToProps","currentUser","main","mapDispatchToProps","dispatch","updateCurrentUser","user","updateUsername"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as mainActions from '../../Store/Actions/mainActions'\r\nimport * as loadingActions from '../../Store/Actions/loadingActions'\r\nimport { LOGIN_PATH } from '../../Constants/const';\r\nimport { getCurrentUser } from '../../UtilityFunctions/functions';\r\nimport { Container,Table,Dropdown,Spinner } from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport './DashboardNotAdded.scss'\r\nclass Dashboard extends Component {\r\n    state = {\r\n        productsNotAdded: [],\r\n        days: 30\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        // axios.get('https://chp.co.il/autocompletion/product_extended?term=8717163647226').then(data=> console.log(data.data[0].value))\r\n        if (!this.props.loggedIn) {\r\n            if (getCurrentUser()) {\r\n                await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n                this.props.setLoggedIn()\r\n                this.loadData(this.state.days)\r\n            }\r\n            else {\r\n                this.props.history.push(LOGIN_PATH)\r\n            }\r\n        }\r\n        else{\r\n            await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n            this.loadData(this.state.days)\r\n        }\r\n    }\r\n    loadData = (days) => {\r\n        this.props.load()\r\n        axios.get('/products/notAdded/' + getCurrentUser().email + '/' + days).then(data => {\r\n            this.setState({productsNotAdded: data.data})\r\n            this.props.finishedLoading()\r\n          })\r\n    }\r\n\r\n    handleDropdownChange = async (days) => {\r\n        this.setState({days:days})\r\n        this.loadData(days)\r\n    }\r\n    render(){\r\n        if(this.props.loading)\r\n            return <Spinner animation=\"border\" className=\"spinner\" />\r\n        return(\r\n            <Container className=\"margin-top-container\">\r\n             \r\n<h1 style={{textAlign:\"right\"}}>מוצרים שלא נכנסו לעגלה</h1>\r\n<Dropdown>\r\n                        <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                  לפי    {this.state.days} ימים אחרונים\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(7)}>לפי 7 ימים אחרונים</Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(30)}>לפי 30 ימים אחרונים </Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(365)}>לפי 365 ימים אחרונים</Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n<Table bordered hover className=\"table-style\">\r\n  <thead>\r\n    <tr>\r\n      <th>תמונה</th>\r\n      <th>שם מוצר</th>\r\n      <th>תאריך</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n      {this.state.productsNotAdded.map(current => {\r\n                    const date = new Date(current.creationDate);\r\n                    const newDate = date.toLocaleDateString('he-IS');          \r\n          return <tr key={current._id}>\r\n                        <td><img height=\"50px\" src={current.image}/></td>\r\n          <td>{current.name}</td>\r\n          <td>{newDate}</td>\r\n\r\n        </tr>\r\n      })}\r\n    \r\n  </tbody>\r\n</Table>\r\n\r\n\r\n</Container>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        currentUser: state.main.currentUser,\r\n        loggedIn: state.main.loggedIn,\r\n        loading: state.loading.loading\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        updateCurrentUser: (user) => dispatch(mainActions.updateUsername(user)),\r\n        setLoggedIn: () => dispatch(mainActions.loggedIn()),\r\n        load: () => dispatch(loadingActions.loading()),\r\n        finishedLoading: () => dispatch(loadingActions.finishedLoading()),\r\n        logIn: (email, password) => dispatch(mainActions.logIn(email, password))\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);"]},"metadata":{},"sourceType":"module"}