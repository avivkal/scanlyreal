{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/avivk/Documents/GitHub/scanlyreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{connect}from'react-redux';import*as mainActions from'../../Store/Actions/mainActions';import*as loadingActions from'../../Store/Actions/loadingActions';import{LOGIN_PATH}from'../../Constants/const';import{getCurrentUser}from'../../UtilityFunctions/functions';import{Container,Table,Dropdown,Spinner,Row}from'react-bootstrap';import axios from'axios';import'./dashboardFilters.scss';var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(){var _this;_classCallCheck(this,Dashboard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[],days:30,totalPriceLocal:0,filter:'price'};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.props.loggedIn){_context.next=11;break;}if(!getCurrentUser()){_context.next=8;break;}_context.next=4;return _this.props.logIn(getCurrentUser().email,getCurrentUser().password);case 4:_this.props.setLoggedIn();_this.loadData(_this.state.days);_context.next=9;break;case 8:_this.props.history.push(LOGIN_PATH);case 9:_context.next=14;break;case 11:_context.next=13;return _this.props.logIn(getCurrentUser().email,getCurrentUser().password);case 13:_this.loadData(_this.state.days);case 14:case\"end\":return _context.stop();}}},_callee);}));_this.loadData=function(days,filter){_this.props.load();var isShufersal=_this.props.currentUser.selection==='Shufersal'?true:false;console.log(_this.props.currentUser.selection+isShufersal);axios.post('/products/agg',{email:getCurrentUser().email,number:days,isShufersal:isShufersal,filter:filter}).then(function(data){_this.setState({products:data.data});var x=0;for(var i=0;i<data.data.length;i++){x+=data.data[i].price;}_this.setState({totalPriceLocal:x});console.log(data.data);_this.props.finishedLoading();});};_this.handleDropdownChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(days){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({days:days});_this.loadData(days);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleDropdownChangeFilters=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.setState({filter:data});_this.loadData(_this.state.days,data);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();return _this;}_createClass(Dashboard,[{key:\"render\",value:function render(){var _this2=this;if(this.props.loading)return/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"spinner\"});return/*#__PURE__*/_jsxs(Container,{className:\"margin-top-container\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"right\"},children:\"\\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05E6\\u05E8\\u05D9\\u05DB\\u05D4\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsxs(Dropdown.Toggle,{variant:\"dark\",id:\"dropdown-basic\",children:[\"\\u05DC\\u05E4\\u05D9    \",this.state.days,\" \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChange(7);},children:\"\\u05DC\\u05E4\\u05D9 7 \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChange(30);},children:\"\\u05DC\\u05E4\\u05D9 30 \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD \"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChange(365);},children:\"\\u05DC\\u05E4\\u05D9 365 \\u05D9\\u05DE\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD\"})]})]}),/*#__PURE__*/_jsxs(Dropdown,{className:\"dropdown-style\",children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"dark\",id:\"dropdown-basic\",children:this.state.filter==='price'?'מחיר כולל':'כמות'}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChangeFilters('price');},children:\"\\u05DE\\u05D7\\u05D9\\u05E8 \\u05DB\\u05D5\\u05DC\\u05DC\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return _this2.handleDropdownChangeFilters('amount');},children:\"\\u05DB\\u05DE\\u05D5\\u05EA \"})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"align-right\",children:[\"\\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD \\u05DC\\u05E4\\u05D9 \\u05E2\\u05D2\\u05DC\\u05D4 \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9\\u05EA: \",/*#__PURE__*/_jsx(\"b\",{children:this.props.currentUser.selection==='Shufersal'?'שופרסל':'רמי לוי'})]}),/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,className:\"table-style\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u05DE\\u05D7\\u05D9\\u05E8 \\u05DB\\u05D5\\u05DC\\u05DC\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05DB\\u05DE\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05EA\\u05DE\\u05D5\\u05E0\\u05D4\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E9\\u05DD \\u05DE\\u05D5\\u05E6\\u05E8\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[this.state.products.map(function(current){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[current.price,\"\\u20AA\"]}),/*#__PURE__*/_jsx(\"td\",{children:current.total}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{height:\"50px\",src:current._id.image})}),/*#__PURE__*/_jsx(\"td\",{children:current._id.name})]},current._id.barcode);}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{children:[(Math.round(this.state.totalPriceLocal*100)/100).toFixed(2),\" \\u20AA\"]})},'total')]})]})]});}}]);return Dashboard;}(Component);var mapStateToProps=function mapStateToProps(state){return{currentUser:state.main.currentUser,loggedIn:state.main.loggedIn,loading:state.loading.loading};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{updateCurrentUser:function updateCurrentUser(user){return dispatch(mainActions.updateUsername(user));},setLoggedIn:function setLoggedIn(){return dispatch(mainActions.loggedIn());},load:function load(){return dispatch(loadingActions.loading());},finishedLoading:function finishedLoading(){return dispatch(loadingActions.finishedLoading());},logIn:function logIn(email,password){return dispatch(mainActions.logIn(email,password));}};};export default connect(mapStateToProps,mapDispatchToProps)(Dashboard);","map":{"version":3,"sources":["C:/Users/avivk/Documents/GitHub/scanlyreal/client/src/Components/DashboardFilters/DashboardFilters.js"],"names":["React","Component","connect","mainActions","loadingActions","LOGIN_PATH","getCurrentUser","Container","Table","Dropdown","Spinner","Row","axios","Dashboard","state","products","days","totalPriceLocal","filter","componentDidMount","props","loggedIn","logIn","email","password","setLoggedIn","loadData","history","push","load","isShufersal","currentUser","selection","console","log","post","number","then","data","setState","x","i","length","price","finishedLoading","handleDropdownChange","handleDropdownChangeFilters","loading","textAlign","map","current","total","_id","image","name","barcode","Math","round","toFixed","mapStateToProps","main","mapDispatchToProps","dispatch","updateCurrentUser","user","updateUsername"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as mainActions from '../../Store/Actions/mainActions'\r\nimport * as loadingActions from '../../Store/Actions/loadingActions'\r\nimport { LOGIN_PATH } from '../../Constants/const';\r\nimport { getCurrentUser } from '../../UtilityFunctions/functions';\r\nimport { Container,Table,Dropdown,Spinner,Row } from 'react-bootstrap';\r\nimport axios from 'axios'\r\nimport './dashboardFilters.scss'\r\nclass Dashboard extends Component {\r\n    state = {\r\n        products: [],\r\n        days: 30,\r\n        totalPriceLocal: 0,\r\n        filter:'price'\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        // axios.get('https://chp.co.il/autocompletion/product_extended?term=8717163647226').then(data=> console.log(data.data[0].value))\r\n        if (!this.props.loggedIn) {\r\n            if (getCurrentUser()) {\r\n                await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n                this.props.setLoggedIn()\r\n                this.loadData(this.state.days)\r\n            }\r\n            else {\r\n                this.props.history.push(LOGIN_PATH)\r\n            }\r\n        }\r\n        else{\r\n            await this.props.logIn(getCurrentUser().email,getCurrentUser().password)\r\n            this.loadData(this.state.days)\r\n        }\r\n    }\r\n    loadData = (days,filter) => {\r\n        this.props.load()\r\n        const isShufersal = this.props.currentUser.selection === 'Shufersal' ? true : false;\r\n        console.log(this.props.currentUser.selection + isShufersal)\r\n        axios.post('/products/agg',{email:getCurrentUser().email,number:days, isShufersal:isShufersal,filter:filter}).then(data=>{\r\n            this.setState({products:data.data})\r\n            let x = 0;\r\n            for(let i = 0; i<data.data.length; i++){\r\n                x+= data.data[i].price;\r\n            }\r\n            this.setState({totalPriceLocal:x})\r\n\r\n            console.log(data.data)\r\n            this.props.finishedLoading()\r\n        })\r\n    }\r\n\r\n    //all through currentUser in Redux!! no local storage!! only for password and username\r\n\r\n    handleDropdownChange = async (days) => {\r\n        this.setState({days:days})\r\n        this.loadData(days)\r\n    }\r\n\r\n    handleDropdownChangeFilters = async (data) => {\r\n        this.setState({filter:data})\r\n        this.loadData(this.state.days,data)\r\n    }\r\n    render(){\r\n        if(this.props.loading)\r\n            return <Spinner animation=\"border\" className=\"spinner\" />\r\n        return(\r\n            <Container className=\"margin-top-container\">\r\n             \r\n<h1 style={{textAlign:\"right\"}}>נתוני צריכה</h1>\r\n<Row>\r\n<Dropdown>\r\n                        <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                  לפי    {this.state.days} ימים אחרונים\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(7)}>לפי 7 ימים אחרונים</Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(30)}>לפי 30 ימים אחרונים </Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChange(365)}>לפי 365 ימים אחרונים</Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n\r\n                    <Dropdown className=\"dropdown-style\">\r\n                        <Dropdown.Toggle variant=\"dark\" id=\"dropdown-basic\">\r\n                  {this.state.filter === 'price' ? 'מחיר כולל' : 'כמות'}\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChangeFilters('price')}>מחיר כולל</Dropdown.Item>\r\n                            <Dropdown.Item onClick={() => this.handleDropdownChangeFilters('amount')}>כמות </Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                    </Row>\r\n                    <p className=\"align-right\">נתונים לפי עגלה נוכחית: <b>{this.props.currentUser.selection === 'Shufersal' ? 'שופרסל' : 'רמי לוי'}</b></p>\r\n\r\n<Table bordered hover className=\"table-style\">\r\n  <thead>\r\n    <tr>\r\n    <th>מחיר כולל</th>\r\n    <th>כמות</th>\r\n\r\n      <th>תמונה</th>\r\n      <th>שם מוצר</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n      {this.state.products.map(current => {\r\n          return <tr key={current._id.barcode}>\r\n                        <td>{current.price}₪</td>\r\n                        <td>{current.total}</td>\r\n\r\n          <td><img height=\"50px\" src={current._id.image}/></td>\r\n          <td>{current._id.name}</td>\r\n\r\n        </tr>\r\n      })}\r\n    <tr key={'total'}>\r\n          <td>{(Math.round((this.state.totalPriceLocal) * 100) / 100).toFixed(2)} ₪</td>\r\n\r\n        </tr>\r\n  </tbody>\r\n</Table>\r\n</Container>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        currentUser: state.main.currentUser,\r\n        loggedIn: state.main.loggedIn,\r\n        loading: state.loading.loading\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        updateCurrentUser: (user) => dispatch(mainActions.updateUsername(user)),\r\n        setLoggedIn: () => dispatch(mainActions.loggedIn()),\r\n        load: () => dispatch(loadingActions.loading()),\r\n        finishedLoading: () => dispatch(loadingActions.finishedLoading()),\r\n        logIn: (email, password) => dispatch(mainActions.logIn(email, password))\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);"]},"metadata":{},"sourceType":"module"}