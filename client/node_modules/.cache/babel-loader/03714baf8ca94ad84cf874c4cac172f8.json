{"ast":null,"code":"import { actionTypes } from '../actionTypes';\nimport axios from '../../Axios/config';\nimport { setCurrentUser, getCurrentUser, setCurrentToken } from '../../UtilityFunctions/functions';\nimport { loading, finishedLoading } from './loadingActions';\n\nconst updateWifiDetails = (username, password) => async dispatch => {\n  dispatch(loading());\n\n  try {\n    const user = await axios.post('/wifi', {\n      email: getCurrentUser().email,\n      wifiUsername: username,\n      wifiPassword: password\n    });\n    console.log(user);\n    dispatch(updateUsername(user.data));\n  } catch (error) {\n    dispatch(openPrompt('תקלה', error.response.data));\n  } finally {\n    dispatch(finishedLoading());\n  }\n};\n\nconst updateSettings = (shufersalUsername, shufersalPassword, ramiLevyUsername, ramiLevyPassword, selection, sound) => async dispatch => {\n  dispatch(loading());\n\n  try {\n    const user = await axios.post('/settings', {\n      email: getCurrentUser().email,\n      shufersalUsername,\n      shufersalPassword,\n      ramiLevyUsername,\n      ramiLevyPassword,\n      selection,\n      sound\n    });\n    await dispatch(updateUsername(user.data));\n    dispatch(openPrompt('נשמר', 'כל המידע נשמר'));\n  } catch (error) {\n    dispatch(openPrompt('תקלה', error.response.data));\n  } finally {\n    dispatch(finishedLoading());\n  }\n};\n\nconst updateUsername = user => dispatch => {\n  setCurrentUser(user);\n\n  try {\n    setCurrentToken(user.token);\n    dispatch(updateToken(user.token));\n  } catch (erorr) {\n    console.log(erorr);\n  }\n\n  return {\n    type: actionTypes.UPDATE_USERNAME,\n    payload: user\n  };\n};\n\nconst openPrompt = (title, text, subjectOptional) => {\n  return {\n    type: actionTypes.OPEN_PROMPT,\n    title,\n    text,\n    subjectOptional\n  };\n};\n\nconst loggedIn = () => {\n  return {\n    type: actionTypes.LOGGED_IN\n  };\n};\n\nconst updateToken = token => {\n  return {\n    type: actionTypes.UPDATE_TOKEN,\n    token\n  };\n};\n\nconst logIn = (email, password) => async dispatch => {\n  dispatch(loading());\n\n  try {\n    const user = await axios.post('/login', {\n      email: email,\n      password: password\n    });\n    await dispatch(updateUsername(user.data));\n    await dispatch(loggedIn());\n  } catch (error) {\n    dispatch(openPrompt('תקלה', error.response));\n  } finally {\n    dispatch(finishedLoading());\n  }\n};\n\nconst register = (email, password) => async dispatch => {\n  dispatch(loading());\n\n  try {\n    const user = await axios.post('/register', {\n      email: email,\n      password: password\n    });\n    console.log(user.data);\n    await dispatch(updateUsername(user.data));\n    await dispatch(loggedIn());\n  } catch (error) {\n    dispatch(openPrompt('תקלה', error.response.data));\n  } finally {\n    dispatch(finishedLoading());\n  }\n};\n\nexport { updateUsername, loggedIn, logIn, register, updateWifiDetails, updateSettings, updateToken };","map":{"version":3,"sources":["C:/Users/avivk/Documents/GitHub/scanlyreal/client/src/Store/Actions/mainActions.js"],"names":["actionTypes","axios","setCurrentUser","getCurrentUser","setCurrentToken","loading","finishedLoading","updateWifiDetails","username","password","dispatch","user","post","email","wifiUsername","wifiPassword","console","log","updateUsername","data","error","openPrompt","response","updateSettings","shufersalUsername","shufersalPassword","ramiLevyUsername","ramiLevyPassword","selection","sound","token","updateToken","erorr","type","UPDATE_USERNAME","payload","title","text","subjectOptional","OPEN_PROMPT","loggedIn","LOGGED_IN","UPDATE_TOKEN","logIn","register"],"mappings":"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","sourcesContent":["import { actionTypes } from '../actionTypes'\r\nimport axios from '../../Axios/config'\r\nimport { setCurrentUser,getCurrentUser, setCurrentToken } from '../../UtilityFunctions/functions'\r\nimport { loading, finishedLoading } from './loadingActions'\r\n\r\nconst updateWifiDetails = (username, password) => async dispatch => {\r\n    dispatch(loading());\r\n    try{\r\n        const user = await axios.post('/wifi',{email:getCurrentUser().email,wifiUsername: username,wifiPassword: password })\r\n        console.log(user)\r\n        dispatch(updateUsername(user.data));\r\n    }\r\n    catch(error){\r\n        dispatch(openPrompt('תקלה', error.response.data))\r\n    }\r\n    finally{\r\n        dispatch(finishedLoading());\r\n    }\r\n}\r\n\r\nconst updateSettings = (shufersalUsername,shufersalPassword,ramiLevyUsername,ramiLevyPassword,selection,sound) => async dispatch => {\r\n    dispatch(loading());\r\n    try{\r\n        const user = await axios.post('/settings',\r\n        {email:getCurrentUser().email,\r\n            shufersalUsername,\r\n            shufersalPassword,\r\n            ramiLevyUsername,\r\n            ramiLevyPassword,\r\n            selection,\r\n            sound\r\n         })\r\n        await dispatch(updateUsername(user.data));\r\n\r\n        dispatch(openPrompt('נשמר','כל המידע נשמר'))\r\n    }\r\n    catch(error){\r\n        dispatch(openPrompt('תקלה', error.response.data))\r\n    }\r\n    finally{\r\n        dispatch(finishedLoading());\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nconst updateUsername = (user) => dispatch => {\r\n    setCurrentUser(user);\r\n    try{\r\n        setCurrentToken(user.token)\r\n        dispatch(updateToken(user.token))\r\n    }\r\n    catch(erorr){\r\n        console.log(erorr)\r\n    }\r\n    return {\r\n        type: actionTypes.UPDATE_USERNAME,\r\n        payload: user\r\n    }\r\n}\r\n\r\nconst openPrompt = (title, text, subjectOptional) => {\r\n    return {\r\n        type: actionTypes.OPEN_PROMPT,\r\n        title,\r\n        text,\r\n        subjectOptional\r\n    }\r\n}\r\n\r\n\r\nconst loggedIn = () => {\r\n    return {\r\n        type: actionTypes.LOGGED_IN\r\n    }\r\n}\r\n\r\nconst updateToken = (token) => {\r\n    return {\r\n        type: actionTypes.UPDATE_TOKEN,\r\n        token,\r\n    }\r\n}\r\n\r\nconst logIn = (email, password) => async dispatch => {\r\n    dispatch(loading());\r\n    try {\r\n        const user = await axios.post('/login', { email: email, password: password })\r\n        await dispatch(updateUsername(user.data));\r\n        await dispatch(loggedIn());\r\n    }\r\n    catch (error) {\r\n        dispatch(openPrompt('תקלה', error.response))\r\n    }\r\n    finally {\r\n        dispatch(finishedLoading());\r\n    }\r\n}\r\n\r\nconst register = (email, password) => async dispatch => {\r\n    dispatch(loading());\r\n    try {\r\n        const user = await axios.post('/register', { email: email, password: password })\r\n        console.log(user.data)\r\n        await dispatch(updateUsername(user.data));\r\n        await dispatch(loggedIn());\r\n    }\r\n    catch (error) {\r\n        dispatch(openPrompt('תקלה', error.response.data))\r\n    }\r\n    finally {\r\n        dispatch(finishedLoading());\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport {\r\n    updateUsername,\r\n    loggedIn,\r\n    logIn,\r\n    register,\r\n    updateWifiDetails,\r\n    updateSettings,\r\n    updateToken\r\n}\r\n"]},"metadata":{},"sourceType":"module"}